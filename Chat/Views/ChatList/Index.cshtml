@using antapp.Chat.Models

@model antapp.Chat.ViewModels.ChatListViewModel

@{
    ViewBag.Title = "Chats";
}

    <div>
        <h1>Available chats:</h1>
    </div>
    @if (Model.Chats is null)
    {
        <h2>No chats available.</h2>
    }
    else
    {
        <div class="accordion" id="accordionPage">
            @foreach(var x in Model.Chats){
                <div class="accordion-item">
                    <h3 class="accordion-header" id="header-@x.Id">
                        <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#event-@x.Id" aria-expanded="false" aria-controls="event-@x.Id">
                            <h4>@x.Chatname</h4>
                        </button>
                    </h3>

                    <div id="event-@x.Id" class="accordion-collapse collapse show" aria-labelledby="header-@x.Id" data-bs-parent="#accordionPage">
                        <div class="accordion-body">
                            <h5>@x.Description</h5>
                            @if(x.CatchCount >= 100){
                            <a href="/Chat?chatId=@x.Id" class="btn btn-success float-right" role="button">See Chat</a>
                            }
                            else
                            {
                                <h5>Cath 5 ants in this park to unlock chat:</h5>
                                <div class="progress">
                                    <div class="progress-bar" role="progressbar" style="width: @x.CatchCount%" aria-valuenow="@x.CatchCount" aria-valuemin="0" aria-valuemax="100"></div>
                                </div>
                            }
                        </div>
                    </div>
                </div>
            }
        </div>
}